#include "Stable.h"
#include "DeviceInfo.h"

static const uint32_t
    CONFIG_MEMORY_MASK_VER_1[] = { 0xC30F, 0x803F, 0x87B3, 0x310F, 0x330F, 0x0007, 0xC003 },
    CONFIG_MEMORY_MASK_VER_2[] = { 0xC71F, 0x803F, 0x87B3, 0x310F, 0x330F, 0x0007, 0xC003 };

static const DeviceInfo DEVICE_INFO[] = {
    { 0x0404, "dsPIC30F1010", false },
    { 0x0040, "dsPIC30F2010", true, 8192, 1024, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0240, "dsPIC30F2011", true, 8192, 0, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0241, "dsPIC30F2012", true, 8192, 0, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0400, "dsPIC30F2020", false },
    { 0x0403, "dsPIC30F2023", false },
    { 0x01C0, "dsPIC30F3010", true, 16384, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x01C1, "dsPIC30F3011", true, 16384, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x00C1, "dsPIC30F3012", true, 16384, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x00C3, "dsPIC30F3013", true, 16384, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0160, "dsPIC30F3014", true, 16384, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0101, "dsPIC30F4011", true, 32768, 1024, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0100, "dsPIC30F4012", true, 32768, 1024, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0141, "dsPIC30F4013", true, 32768, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0080, "dsPIC30F5011", true, 45056, 1024, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0081, "dsPIC30F5013", true, 45056, 1024, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0200, "dsPIC30F5015", true, 45056, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0201, "dsPIC30F5016", true, 45056, 1024, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0188, "dsPIC30F6010", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x0281, "dsPIC30F6010A", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0192, "dsPIC30F6011", true, 98304, 2048, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x02C0, "dsPIC30F6011A", true, 98304, 2048, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0193, "dsPIC30F6012", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x02C2, "dsPIC30F6012A", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0197, "dsPIC30F6013", true, 98304, 2048, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x02C1, "dsPIC30F6013A", true, 98304, 2048, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0198, "dsPIC30F6014", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_1 },
    { 0x02C3, "dsPIC30F6014A", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_2 },
    { 0x0280, "dsPIC30F6015", true, 98304, 4096, 14, CONFIG_MEMORY_MASK_VER_2 }
};

const DeviceInfo *getDeviceInfo(uint32_t deviceId)
{
    for (size_t i = 0; i < sizeof DEVICE_INFO / sizeof DEVICE_INFO[0]; ++i)
    {
        if (DEVICE_INFO[i].deviceId == deviceId) return &DEVICE_INFO[i];
    }

    return nullptr;
}
